# Upon winning initial war over Armenia, Seljuk Emperor gets event 0001
# Upon losing initial war over Armenia, Byzantine Emperor gets event 0002
# Upon declaring war for Asia Minor, Seljuk Emperor gets event 0003
# Upon Seljuk Emperor's declaration for Asia Minor, Suleyman ibn Qutalmish gets event 0004

namespace = seljuk_invasion_events

# Winning first initial war with Seljuks
seljuk_invasion_events.0001 = {
	
	title = seljuk_invasion_events.0001.title
	desc = seljuk_invasion_events.0001.desc
	theme = war
	
	# Left portrait is Byzantine Emperor, right portrait is Seljuk Emperor
	left_portrait = {
		character = title:e_byzantium.holder
		animation = shame
	}
	
	right_portrait = {
		character = title:e_persia.holder
		animation = war_over_win
	}
	
	immediate = {
		# Grant Seljuk Emperor CB to invade most of Asia Minor
		custom_tooltip = seljuk_invasion_cb_gain_tooltip
		hidden_effect = {
			house = {
				add_house_modifier = {
					modifier = seljuk_invasion_modifier
					years = 100
				}
			}
		}
	}
	
	# Soon, all Asia Minor will be ours!
	option = {
		name = seljuk_invasion_events.0001.a
		
		ai_chance = {
			base = 100
		}
	}
	
}

# Byzantine Emperor gets this event when Seljuks win first war
seljuk_invasion_events.0002 = {
	title = seljuk_invasion_events.0002.title
	desc = seljuk_invasion_events.0002.desc
	theme = war
	
	# Left portrait is Byzantine Emperor, right portrait is Seljuk Emperor
	left_portrait = {
		character = title:e_byzantium.holder
		animation = shame
	}
	
	right_portrait = {
		character = title:e_persia.holder
		animation = war_over_win
	}
	
	immediate = {
		# Grant Seljuk Emperor CB to invade most of Asia Minor
		custom_tooltip = seljuk_invasion_cb_gain_tooltip
	}
	
	# This is bad!
	option = {
		name = seljuk_invasion_events.0002.a
		
		ai_chance = {
			base = 100
		}
	}
}


# Seljuk Emperor declares war for Asia Minor, Suleiman ibn Qutulmish 'helps' if he's alive and landed (he should be)
seljuk_invasion_events.0003 = {
	# Suleiman must be alive
	trigger = {
		character:3046 = {
			is_alive = yes
			is_landed = yes
		}
	}

	title = seljuk_invasion_events.0003.title
	desc = seljuk_invasion_events.0003.desc
	theme = war
	
	# Left portrait is Seljuk Emperor, right portrait is Suleiman
	left_portrait = {
		character = title:e_persia.holder
		animation = dismissal
	}
	
	right_portrait = {
		character = character:3046 # Suleiman
		animation = personality_bold
	}
	
	immediate = {
		# Suleiman joins war as attacker
		custom_tooltip = seljuk_invasion_suleyman_join_tooltip
		hidden_effect = {
			# Go through Seljuk Emperor's wars
			title:e_persia.holder = {
				every_character_war = {
					# If the war is against Byzantium, have Suleiman join that war
					if = {
						limit = {
						primary_defender = title:e_byzantium.holder
						}
						add_attacker = character:3046
						# spawn more troops for Suleyman too (10,000! Not historically accurate, just for balance between Seljuk and Rum)
						character:3046 = {
							spawn_army = {
								name = event_troop_default_name
								levies = 2000
								men_at_arms = {
									type = horse_archers
									men = 500
								}
								location = 4893
								origin = 4893
								uses_supply = no
							}
							spawn_army = {
								name = event_troop_default_name
								levies = 2000
								men_at_arms = {
									type = horse_archers
									men = 500
								}
								location = 4893
								origin = 4893
								uses_supply = no
							}
							spawn_army = {
								name = event_troop_default_name
								levies = 2000
								men_at_arms = {
									type = horse_archers
									men = 500
								}
								location = 4893
								origin = 4893
								uses_supply = no
							}
							spawn_army = {
								name = event_troop_default_name
								levies = 2000
								men_at_arms = {
									type = horse_archers
									men = 500
								}
								location = 4893
								origin = 4893
								uses_supply = no
							}
						}
					}
				}
			}
		}
	}
	
	option = {
		name = seljuk_invasion_events.0003.a
		
		ai_chance = {
			base = 100
		}
	}
}

# Seljuk Emperor declares war for Asia Minor, Suleiman ibn Qutulmish 'helps' if he's alive (Suleiman's event)
seljuk_invasion_events.0004 = {
	trigger = {
		character:3046 = {
			is_alive = yes
			is_landed = yes
		}
	}
	
	title = seljuk_invasion_events.0004.title
	desc = seljuk_invasion_events.0004.desc
	theme = war
	
	# Left portrait is Seljuk Emperor, right portrait is Suleiman
	left_portrait = {
		character = title:e_persia.holder
		animation = dismissal
	}
	
	right_portrait = {
		character = character:3046
		animation = personality_dishonorable
	}
	
	immediate = {
		# Suleiman joins war as attacker
		custom_tooltip = seljuk_invasion_suleyman_join_tooltip
	}
	
	option = {
		name = seljuk_invasion_events.0004.a
		
		ai_chance = {
			base = 100
		}
	}
}

# Byzantine Emperor is notified of new Seljuk invasion of all of Asia Minor
seljuk_invasion_events.0005 = {	
	title = seljuk_invasion_events.0005.title
	desc = seljuk_invasion_events.0005.desc
	theme = war
	
	# Left portrait is Byzantine Emperor, right portrait is Seljuk Emperor
	left_portrait = {
		character = title:e_byzantium.holder
		animation = fear
	}
	
	right_portrait = {
		character = title:e_persia.holder
		animation = personality_bold
	}
	
	option = {
		name = seljuk_invasion_events.0005.a
		
		ai_chance = {
			base = 100
		}
	}
}